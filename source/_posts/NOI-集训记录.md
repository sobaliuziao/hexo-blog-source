---
title: 'NOI 集训记录'
date: 2025-03-18 15:51:00
---

## 20250318

[http://oj.daimayuan.top/contest/321](http://oj.daimayuan.top/contest/321)

今天考的代码源，只有 $100+36+33=169$。

### T1

很快会了个 $O(n^2)$ 的暴力，没想到非零位置是不多的，听张大神说了才会。

### T2

赛时很快想到了用本质不同子序列数减去只出现一次的个数，并写了 $O(qnm)$ 的做法。

第二部分一直在想怎么用线段树维护矩乘，没有想到可以用线段树直接维护 dp，即设 $f_{i,x,y}$ 表示 $i$ 对应的区间，第一个字符为 $x$，最后一个字符为 $y$，且在 $i$ **对应的区间**内没有出现比选的 $x$ 更靠前的 $x$，且没有出现比选的 $y$ 更靠后的 $y$。

转移时维护一个区间每个字符第一次出现和最后一次出现的位置即可。

不过好像也可以用矩乘做，因为观察 dp 方程：

```cpp
for (int i = 1; i <= n + 1; ++i) {
  int sum = 0;
  for (int j = 0; j <= m; ++j)
    if (lst[j] >= lst[a[i]])
      inc(sum, g[j]);
  g[a[i]] = sum;
  for (int j = 0; j <= m; ++j)
    if (lst[j] > lst[a[i]])
      --lst[j];
  lst[a[i]] = m;
}
```

转移矩阵只与每个字符上次出现的位置有关，所以每次修改 $a_x$，如果对于 $a_y$，满足 $(x,y)$ 之间还有一个数等于 $a_y$，则 $y$ 的转移矩阵不会变化。

所以每次只会修改 $O(m)$ 个矩阵，暴力维护是 $O(nm^2+qm^4\log n)$，会被卡常。

### T3

赛时按照题意模拟得到了 $33$ 分，$O(nm)$ 的子任务不知道为什么挂了。

正解还不会。

---

## 20250320

<http://oj.daimayuan.top/contest/323>

今天还是代码源，考了 $55+100+0=155$。

### T1

赛时最开始以为答案变化量不大，写了个线段树分治+bfs的做法，得了 $55$ 分。

后面才发现一个点不能删掉的条件是存在一个两端都是 $2\times 2$ 的矩形的阶梯形折线经过它。

但是发现这个东西不好维护就抛了。

### T2

赛时很快得到了一个 $6$ 维偏序的做法，并想到了维护关于 $b$ 的前缀和的单调栈和这个单调栈上的单调性，且写了 $L_1=L_2=0,R_1=R_2=n-1$ 的子任务。

然后发现只要用扫描线+历史和线段树维护即可，在 $4:54$ 的时候才写完。

### T3

没时间开了。

---

## 20250325

<http://oj.daimayuan.top/contest/324>

今天考了 $100+72+0=172$。

### T1

赛时很快发现可以缩边双，并且颜色相同的连通块构成一个链，后面发现枚举断边就可以进行比较简单的换根 dp 了。

### T2

赛时写了用线段树维护没被加入的最小点和二分插入的做法，拼了 $72$ 分。

正解好像是在树上合并子树，如果两个子树的大小之差比较大就二分插入，否则归并合并，然后卡下常。

### T3

赛时只会 $19$ 分暴力，但没写完。

正解还不会。

---

## 20250327

<http://oj.daimayuan.top/contest/325>

今天考了 $20+80+10=110$。

### T1

最开始以为轮廓一定是若干个 $2\times 2$ 的矩形，就做不了。但是实际上可以不是，只要求能接起来就行。后面很快想了个上下界最大费用可行流做法，感觉怪怪的就没写，没想到是正解。

### T2

最开始以为是道难题，但是稍微想了一下就会 $O(n\log^2n)$ 做法了，写完被卡常成了 $80$ 分，卡了一会常无果后就润了。

### T3

很快会了一个基于随机的 $n+\epsilon$ 做法，结果写挂了只有 $10$ 分。

赛后调了一下结果还是只有 $47$ 分，操作次数大概是 $\frac{3}{2}n$，不知道哪里分析错了。

正解好像也是基于随机化，并且和我的做法大致相同？

---

## 20250401

<http://oj.daimayuan.top/contest/326>

今天考了 $100+65+0=165$。

### T1

赛时很快会了正解做法，写代码的时候把 `dfn[x]` 写成 `x` 了，调了一会。

### T2

赛时先打了指数暴力，然后找了很久规律才发现一个串合法的条件是不存在长度超过 $\frac{n-1}{2}-1$ 的 $0$ 连续段经过中心。

写了 $O(qn)$ 暴力就跑路了。

正解好像是设左边第一个 $1$ 在 $p$，右边第一个 $1$ 在 $q$，则合法条件为 $q-p-1\leq\frac{n-1}{2}-1\Leftrightarrow q-\frac{n-1}{2}\leq p$，根据这个在线段树上 dp 即可？

### T3

啥都不会。

---

## 20250403

<http://oj.daimayuan.top/contest/327>

今天考了 $58+32+25=115$。

### T1

赛时开始看错题了，以为每个人都速度是 $1$，调了 $2$ 个小时才发现。后面发现可以枚举向左和向右的分界点进行 dp，做到 $O(nm)$。

正解是分治 ntt，还不会。

### T2

赛时写了 $O(nq)$ 的暴力，正解不会。

### T3

赛时写了 $O(n^2)$ 的 dp，后面以为可以用吉司机线段树优化，但是实际上这么做会改变相对顺序，也就不对了。

但是每次把不小于最大值减一的状态拿出来 dp 可以过。

这个为什么对啊？

---

## 20250406

<http://xsy.gdgzez.com.cn/JudgeOnline/contest.php?cid=2241>

今天考的联考，考了 $100+0+70=170$ 分。

### T1

很快想到了在 dfs 树上分讨的做法，最开始忘记讨论 $v\to u$ 的链和 $v$ 子树连边然后 $v$ 子树再和 $u$ 的祖先连边的情况，导致调了很久。

### T2

赛时没有思路，但是是厉害题。

<https://www.cnblogs.com/Scarab/p/18811297>

### T3

赛时写了 $O(NM^2)$ 的暴力 dp 做法，正解是发现 dp 的有用状态是 $O(NML)$ 级别的，将有用状态拿出来就能做到 $O(NML)$。

---

## 20250412

<http://xsy.gdgzez.com.cn/JudgeOnline/contest.php?cid=2244>

今天考了 $100+28+0=128$。

### T1

赛时很快想到了 $2^{q_2}$ 枚举线段的选法的做法，并在 1h 内写完了。

std 是枚举编号最小的线段，然后其余的线段在这个线段上就构成区间了，可以做到 $O(q_1q_2\log q_1)$。

### T2

赛时写了 $O(n^2+nq)$ 的暴力 dp。

<https://www.cnblogs.com/Scarab/p/18822216>

### T3

啥都不会。